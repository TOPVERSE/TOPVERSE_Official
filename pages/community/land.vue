<script setup>
import { onBeforeUnmount, onMounted, ref } from 'vue'
import UnityWebgl from 'unity-webgl'

const canvasRef = ref(null)
let unityComponent = null

onMounted(() => {
  if (!unityComponent) {
    unityComponent = new UnityWebgl(canvasRef.value, {
      loaderUrl:
        '/unity/test/Build/Builds.loader.js',
      dataUrl:
        '/unity/test/Build/Builds.data',
      frameworkUrl:
        '/unity/test/Build/Builds.framework.js',
      codeUrl:
        '/unity/test/Build/Builds.wasm',
    })
  }
})
onBeforeUnmount(() => {
  if (unityComponent) {
    unityComponent.destroy()
    unityComponent = null
  }
})
</script>

<template>
  <div flex flex-col items-center justify-center pt-30>
    <Typography title="åœ¨çº¿ä½“éªŒ" topic="3Dåœºæ™¯å®žæ—¶äº¤äº’" description="é¼ æ ‡ç§»åŠ¨åˆ°ç”»é¢ä¸­ï¼Œç‚¹å‡»å³å¯è¿›å…¥åˆ°åœºæ™¯å†…éƒ¨ï¼Œå·´æ‹‰å·´æ‹‰å·´æ‹‰å·´æ‹‰" />

    <div class="relative mt-20 h-600px w-1000px border-5px border-stone rounded shadow md:h-800px md:w-1500px">
      <div class="absolute w-full flex items-center justify-between pb-3 -translate-y-full">
        <div class="flex gap-4">
          <!-- ðŸ‘‰ Sales -->
          <div class="flex items-center gap-x-3">
            <AAvatar
              icon="i-emojione-monotone-letter-w"
              color="success"
              class="rounded-lg text-[1.25rem]"
            />
            <ATypography
              :title="['é”®ç›˜Wé”®', 'text-sm font-normal !text-medium-emphasis']"
              :subtitle="['å‰è¿›', 'font-semibold !text-high-emphasis']"
            />
          </div>

          <!-- ðŸ‘‰ Revenue -->
          <div class="flex items-center gap-x-3">
            <AAvatar
              icon="i-emojione-monotone-letter-a"
              class="rounded-lg text-[1.25rem]"
            />
            <ATypography
              :title="['é”®ç›˜Aé”®', 'text-sm !text-medium-emphasis font-normal']"
              :subtitle="['å·¦èµ°', 'font-semibold !text-high-emphasis']"
            />
          </div>

          <!-- ðŸ‘‰ Customer -->
          <div class="flex items-center gap-x-3">
            <AAvatar
              icon="i-emojione-monotone-letter-s"
              color="info"
              class="rounded-lg text-[1.25rem]"
            />
            <ATypography
              :title="['é”®ç›˜Sé”®', 'text-sm !text-medium-emphasis font-normal']"
              :subtitle="['å³èµ°', 'font-semibold !text-high-emphasis']"
            />
          </div>

          <!-- ðŸ‘‰ Returns -->
          <div class="flex items-center gap-x-3">
            <AAvatar
              icon="i-emojione-monotone-letter-d"
              color="danger"
              class="rounded-lg text-[1.25rem]"
            />
            <ATypography
              :title="['é”®ç›˜Dé”®', 'text-sm !text-medium-emphasis font-normal']"
              :subtitle="['åŽé€€', 'font-semibold !text-high-emphasis']"
            />
          </div>
        </div>
        <div>
          <div class="flex items-center gap-x-3">
            <AAvatar
              icon="i-ic-baseline-mouse"
              color="orange"
              class="rounded-lg text-[1.25rem]"
            />
            <ATypography
              :title="['é¼ æ ‡æ‹–åŠ¨', 'text-sm !text-medium-emphasis font-normal']"
              :subtitle="['è½¬æ¢è§†è§’', 'font-semibold !text-high-emphasis']"
            />
          </div>
        </div>
      </div>
      <canvas id="canvas" ref="canvasRef" style="width: 100%; height: 100%" class="rounded-sm" />
    </div>
  </div>
</template>
